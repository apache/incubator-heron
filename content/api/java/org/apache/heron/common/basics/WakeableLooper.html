<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_222) on Sat Dec 07 02:14:03 GMT 2019 -->
<title>WakeableLooper (Heron Java API)</title>
<meta name="date" content="2019-12-07">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="WakeableLooper (Heron Java API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":6,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/heron/common/basics/TypeUtils.html" title="class in org.apache.heron.common.basics"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/apache/heron/common/basics/WakeableLooperTest.html" title="class in org.apache.heron.common.basics"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/heron/common/basics/WakeableLooper.html" target="_top">Frames</a></li>
<li><a href="WakeableLooper.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.heron.common.basics</div>
<h2 title="Class WakeableLooper" class="title">Class WakeableLooper</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.heron.common.basics.WakeableLooper</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../org/apache/heron/common/basics/NIOLooper.html" title="class in org.apache.heron.common.basics">NIOLooper</a>, <a href="../../../../../org/apache/heron/common/basics/SlaveLooper.html" title="class in org.apache.heron.common.basics">SlaveLooper</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">WakeableLooper</span>
extends java.lang.Object</pre>
<div class="block">A WakeableLooper is a class that could:
 Block the thread when doWait() is called and unblock
 when the wakeUp() is called or the waiting time exceeds the timeout.
 It could execute timer event
 <p>
 The WakeableLooper will execute in a while loop unless the exitLoop() is called. And in every
 execution, it will execute runOnce(), which will:
 1. doWait(), which in fact is implemented by selector.select(timeout), and it will be wake up if other threads
 wake it up, it meets the timeout, one channel is selected, or the current thread is interrupted.
 2. run executeTasksOnWakeup(), which is a list of Runnable, e.g. tasks added to run every time. We could add tasks
 even during executionTasksOnWakeup, but the task added will be executed next time we run executeTasksOnwakeup().
 Notice: you could just add tasks into it but not remove tasks from it.
 3. trigger the timers, which is a priority queue of <code>TimerTask</code>, the <code>TimerTask</code>
 will be removed after execution.
 <p>
 So to use this class, user could add the persistent tasks, one time tasks and timer tasks as many
 as they want.
 Most methods except the onExit() are not thread-safe.
 People should handle the concurrent scenarios in their business logic rather than in this class.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/apache/heron/common/basics/WakeableLooper.html#WakeableLooper--">WakeableLooper</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/heron/common/basics/WakeableLooper.html#addTasksOnExit-java.lang.Runnable-">addTasksOnExit</a></span>(java.lang.Runnable&nbsp;task)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/heron/common/basics/WakeableLooper.html#addTasksOnWakeup-java.lang.Runnable-">addTasksOnWakeup</a></span>(java.lang.Runnable&nbsp;task)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/heron/common/basics/WakeableLooper.html#clear--">clear</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/heron/common/basics/WakeableLooper.html#clearExitTasks--">clearExitTasks</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/heron/common/basics/WakeableLooper.html#clearTasksOnWakeup--">clearTasksOnWakeup</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/heron/common/basics/WakeableLooper.html#clearTimers--">clearTimers</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/heron/common/basics/WakeableLooper.html#doWait--">doWait</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/heron/common/basics/WakeableLooper.html#exitLoop--">exitLoop</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected java.time.Duration</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/heron/common/basics/WakeableLooper.html#getNextTimeoutInterval--">getNextTimeoutInterval</a></span>()</code>
<div class="block">Get the timeout which should be used in doWait().</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/heron/common/basics/WakeableLooper.html#loop--">loop</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/heron/common/basics/WakeableLooper.html#registerPeriodicEvent-java.time.Duration-java.lang.Runnable-">registerPeriodicEvent</a></span>(java.time.Duration&nbsp;frequency,
                     java.lang.Runnable&nbsp;task)</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/heron/common/basics/WakeableLooper.html#registerTimerEvent-java.time.Duration-java.lang.Runnable-">registerTimerEvent</a></span>(java.time.Duration&nbsp;timerDuration,
                  java.lang.Runnable&nbsp;task)</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/heron/common/basics/WakeableLooper.html#wakeUp--">wakeUp</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="WakeableLooper--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>WakeableLooper</h4>
<pre>public&nbsp;WakeableLooper()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="clear--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre>public&nbsp;void&nbsp;clear()</pre>
</li>
</ul>
<a name="clearTasksOnWakeup--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearTasksOnWakeup</h4>
<pre>public&nbsp;void&nbsp;clearTasksOnWakeup()</pre>
</li>
</ul>
<a name="clearTimers--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearTimers</h4>
<pre>public&nbsp;void&nbsp;clearTimers()</pre>
</li>
</ul>
<a name="clearExitTasks--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearExitTasks</h4>
<pre>public&nbsp;void&nbsp;clearExitTasks()</pre>
</li>
</ul>
<a name="loop--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loop</h4>
<pre>public&nbsp;void&nbsp;loop()</pre>
</li>
</ul>
<a name="doWait--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doWait</h4>
<pre>protected abstract&nbsp;void&nbsp;doWait()</pre>
</li>
</ul>
<a name="wakeUp--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wakeUp</h4>
<pre>public abstract&nbsp;void&nbsp;wakeUp()</pre>
</li>
</ul>
<a name="addTasksOnWakeup-java.lang.Runnable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addTasksOnWakeup</h4>
<pre>public&nbsp;void&nbsp;addTasksOnWakeup(java.lang.Runnable&nbsp;task)</pre>
</li>
</ul>
<a name="addTasksOnExit-java.lang.Runnable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addTasksOnExit</h4>
<pre>public&nbsp;void&nbsp;addTasksOnExit(java.lang.Runnable&nbsp;task)</pre>
</li>
</ul>
<a name="registerTimerEvent-java.time.Duration-java.lang.Runnable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerTimerEvent</h4>
<pre>public&nbsp;void&nbsp;registerTimerEvent(java.time.Duration&nbsp;timerDuration,
                               java.lang.Runnable&nbsp;task)</pre>
</li>
</ul>
<a name="registerPeriodicEvent-java.time.Duration-java.lang.Runnable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerPeriodicEvent</h4>
<pre>public&nbsp;void&nbsp;registerPeriodicEvent(java.time.Duration&nbsp;frequency,
                                  java.lang.Runnable&nbsp;task)</pre>
</li>
</ul>
<a name="exitLoop--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>exitLoop</h4>
<pre>public&nbsp;void&nbsp;exitLoop()</pre>
</li>
</ul>
<a name="getNextTimeoutInterval--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getNextTimeoutInterval</h4>
<pre>protected&nbsp;java.time.Duration&nbsp;getNextTimeoutInterval()</pre>
<div class="block">Get the timeout which should be used in doWait().</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>INFINITE_FUTURE : if there are no timer events
 or the time to next timer event in milli-second</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/heron/common/basics/TypeUtils.html" title="class in org.apache.heron.common.basics"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/apache/heron/common/basics/WakeableLooperTest.html" title="class in org.apache.heron.common.basics"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/heron/common/basics/WakeableLooper.html" target="_top">Frames</a></li>
<li><a href="WakeableLooper.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
