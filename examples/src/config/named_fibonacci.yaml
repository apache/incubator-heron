#  Copyright 2017 Twitter. All rights reserved.
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#  http:#www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

---

name: "named-fibonacci-topology"

config:
  topology.workers: 1

components:
  - id: "property-holder"
    className: "com.twitter.heron.examples.eco.TestPropertyHolder"
    constructorArgs:
      - "some argument"


spouts:
  - id: "spout-1"
    className: "com.twitter.heron.examples.eco.TestFibonacciSpout"
    constructorArgs:
      - ref: "property-holder"
    parallelism: 1

bolts:
  - id: "bolt-1"
    className: "com.twitter.heron.examples.eco.EvenAndOddBolt"
    parallelism: 1
  - id: "bolt-2"
    className: "com.twitter.heron.examples.eco.TestIBasicPrintBolt"
    parallelism: 1

streams:
  - name: "spout-1 --> bolt-1" # name isn't used (placeholder for logging, UI, etc.)
    from: "spout-1"
    to: "bolt-1"
    grouping:
      type: SHUFFLE

  - name: "spout-1 --> bolt-2"
    from: "spout-1"
    to: "bolt-2"
    grouping:
      type: SHUFFLE

  - name: "bolt-2 --> bolt1"
    from: "bolt-2"
    to: "bolt-1"
    grouping:
      type: SHUFFLE
