<!DOCTYPE html><html lang="en-us"><head><link rel="shortcut icon" type="image/png" sizes="16x16" href="http://localhost:1313/heron/img/favicon-16x16.png"><link rel="shortcut icon" type="image/png" sizes="32x32" href="http://localhost:1313/heron/img/favicon-32x32.png"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Hugo 0.14"><title>Heron Documentation - Heron Topologies</title><link rel="stylesheet" href="http://localhost:1313/heron/css/style.min.css"><link rel="stylesheet" href="http://localhost:1313/heron/css/font-awesome.min.css"><link rel="stylesheet" href="http://localhost:1313/heron/css/pygments.css"><script defer src="http://code.jquery.com/jquery-2.2.1.min.js"></script><script defer src="http://localhost:1313/heron/js/app.min.js"></script></head><body><nav class="hn-top-navbar navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="hn-navbar-container container-fluid"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#hn-navbar" aria-controls="hn-navbar" aria-expanded="false"><span class="sr-only"><Toggle>navigation</Toggle></span><i class="hn-toggle-button fa fa-bars"></i></button><a class="hn-navbar-logo navbar-brand" href="http://localhost:1313/heron/"><img class="pull-left" src="http://localhost:1313/heron/img/HeronTextLogo-small.png"></a></div><div id="hn-navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a href="http://localhost:1313/heron/docs/getting-started">Docs</a></li><li><a href="http://localhost:1313/heron/docs/resources">Resources</a></li><li><a href="http://localhost:1313/heron/docs/contributors/community">Community</a></li><li><a href="https://github.com/twitter/heron">GitHub</a></li><li><a class="nav-icon" href="https://groups.google.com/forum/#!forum/heron-users"><i class="fa fa-comments"></i></a></li><li><a class="nav-icon" href="https://twitter.com/heronstreaming"><i class="fa fa-twitter"></i></a></li></ul></div></div></nav><div class="hn-main"><div class="container"><div class="row"><aside class="hn-sidebar hidden-xs col-sm-3 col-md-3 col-lg-2 collapse"><div><nav class="hn-sidebar-nav"><h4>Getting Started</h4><ul><li><a href="http://localhost:1313/heron/docs/getting-started">Local (Single Node)</a></li><li><a href="http://localhost:1313/heron/docs/upgrade-storm-to-heron">Upgrade Storm Topologies</a></li></ul><ul></ul><h4>Heron Concepts</h4><ul><li><a href="http://localhost:1313/heron/docs/concepts/architecture">Heron Architecture</a></li><li><a href="http://localhost:1313/heron/docs/concepts/topologies">Heron Topology</a></li></ul><ul></ul><h4>Deployment</h4><ul><li><a href="http://localhost:1313/heron/docs/operators/deployment">Overview</a></li><li><a href="http://localhost:1313/heron/docs/operators/deployment/configuration">Configuration</a></li></ul><ul></ul><h4>State Managers</h4><ul><li><a href="http://localhost:1313/heron/docs/operators/deployment/statemanagers/zookeeper">Zookeeper</a></li><li><a href="http://localhost:1313/heron/docs/operators/deployment/statemanagers/localfs">Local FS</a></li></ul><ul></ul><h4>Uploaders</h4><ul><li><a href="http://localhost:1313/heron/docs/operators/deployment/uploaders/localfs">Local FS</a></li><li><a href="http://localhost:1313/heron/docs/operators/deployment/uploaders/hdfs">HDFS</a></li><li><a href="http://localhost:1313/heron/docs/operators/deployment/uploaders/s3">S3</a></li></ul><ul></ul><h4>Schedulers</h4><ul><li><a href="http://localhost:1313/heron/docs/operators/deployment/schedulers/aurora">Aurora Cluster</a></li><li><a href="http://localhost:1313/heron/docs/operators/deployment/schedulers/local">Local Cluster</a></li><li><a href="http://localhost:1313/heron/docs/operators/deployment/schedulers/mesos">Mesos Cluster</a></li><li><a href="http://localhost:1313/heron/docs/operators/deployment/schedulers/slurm">Slurm Cluster</a></li></ul><ul></ul><h4>System Configuration</h4><ul><li><a href="http://localhost:1313/heron/docs/operators/configuration/config-intro">Overview</a></li><li><a href="http://localhost:1313/heron/docs/operators/configuration/instance">Heron Instance</a></li><li><a href="http://localhost:1313/heron/docs/operators/configuration/metrics-manager">Metrics Manager</a></li><li><a href="http://localhost:1313/heron/docs/operators/configuration/stmgr">Stream Manager</a></li><li><a href="http://localhost:1313/heron/docs/operators/configuration/system">System-Level</a></li><li><a href="http://localhost:1313/heron/docs/operators/configuration/tmaster">Topology Master</a></li></ul><ul></ul><h4>Observability</h4><ul><li><a href="http://localhost:1313/heron/docs/operators/observability/graphite">Graphite</a></li></ul><ul></ul><h4>User Manuals</h4><ul><li><a href="http://localhost:1313/heron/docs/operators/heron-cli">Heron Client</a></li><li><a href="http://localhost:1313/heron/docs/operators/heron-tracker-api">Heron Tracker REST API</a></li><li><a href="http://localhost:1313/heron/docs/operators/heron-tracker">Heron Tracker Runbook</a></li><li><a href="http://localhost:1313/heron/docs/operators/heron-ui">Heron UI Runbook</a></li></ul><ul></ul><h4>Topology Writers</h4><ul><li><a href="http://localhost:1313/heron/docs/developers/topologies">Writing Topologies</a></li><li><a href="http://localhost:1313/heron/docs/developers/data-model">Heron Data Model</a></li><li><a href="http://localhost:1313/heron/docs/developers/serialization">Tuple Serialization</a></li><li><a href="http://localhost:1313/heron/docs/developers/ui-guide">Heron UI Guide</a></li><li><a href="http://localhost:1313/heron/docs/developers/tuning">Tuning Guide</a></li><li><a href="http://localhost:1313/heron/docs/developers/simulator-mode">Simulator Mode</a></li><li><a href="http://localhost:1313/heron/docs/developers/troubleshooting">Troubleshooting Guide</a></li><li><a href="http://localhost:1313/heron/api">Javadoc</a></li></ul><ul></ul><h4>Heron Developers</h4><ul><li><a href="http://localhost:1313/heron/docs/developers/compiling/compiling">Compiling</a></li><li><a href="http://localhost:1313/heron/docs/developers/compiling/linux">Compiling on Linux</a></li><li><a href="http://localhost:1313/heron/docs/developers/compiling/mac">Compiling on Mac OS X</a></li><li><a href="http://localhost:1313/heron/docs/developers/compiling/docker">Compiling With Docker</a></li><li><a href="http://localhost:1313/heron/docs/contributors/testing">Running Tests</a></li><li><a href="http://localhost:1313/heron/docs/contributors/codebase">Code Organization</a></li></ul><ul></ul><h4>Extending Heron</h4><ul><li><a href="http://localhost:1313/heron/docs/contributors/custom-scheduler">Custom Scheduler</a></li><li><a href="http://localhost:1313/heron/docs/contributors/custom-metrics-sink">Custom Metrics Sink</a></li></ul><ul></ul><h4>Heron Resources</h4><ul><li><a href="http://localhost:1313/heron/docs/resources">Heron Resources</a></li></ul><ul></ul><h4>Contributors</h4><ul><li><a href="http://localhost:1313/heron/docs/contributors/community">Community</a></li><li><a href="http://localhost:1313/heron/docs/contributors/governance">Governance</a></li></ul><ul></ul></nav></div></aside><section class="hn-docs-main col-sm-9 col-md-9 col-lg-10 col-sm-offset-3 col-md-offset-3 col-lg-offset-2"><header class="hn-docs-header page-header"><h1>Heron Topologies</h1><div class="hn-docs-description"></div></header><article class="hn-docs-content">

<p>A Heron <strong>topology</strong> is a <a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph">directed acyclic
graph</a> used to process
streams of data. Heron topologies consist of three basic components:
<a href="#spouts">spouts</a> and <a href="#bolts">bolts</a>, which are connected via
<strong>streams</strong> of <a href="../../developers/data-model">tuples</a>. Below is a visual
illustration of a simple topology:</p>

<p><img src="http://localhost:1313/heron/img/topology.png" alt="Heron topology" /></p>

<p>Spouts are responsible for emitting <a href="../../developers/data-model">tuples</a>
into the topology, while bolts are responsible for processing those tuples. In
the diagram above, spout <strong>S1</strong> feeds tuples to bolts <strong>B1</strong> and <strong>B2</strong> for
processing; in turn, bolt <strong>B1</strong> feeds processed tuples to bolts <strong>B3</strong> and
<strong>B4</strong>, while bolt <strong>B2</strong> feeds processed tuples to bolt <strong>B4</strong>.</p>

<p>This is just a simple example; you can use bolts and spouts to form arbitrarily
complex topologies.</p>

<h2 id="topology-lifecycle:2990a96fddad7dca382b7d6e0cf93241">Topology Lifecycle</h2>

<p>Once you&rsquo;ve set up a <a href="../../operators/deployment">Heron cluster</a>, you
can use Heron&rsquo;s <a href="../../operators/heron-cli">CLI tool</a> to manage the entire
lifecycle of a topology, which typically goes through the following stages:</p>

<ol>
<li><a href="../../operators/heron-cli#submitting-a-topology">submit</a> the topology
to the cluster. The topology is not yet processing streams but is ready to be
activated.</li>
<li><a href="../../operators/heron-cli#activating-a-topology">activate</a> the
topology. The topology will begin processing streams in accordance with
the topology architecture that you&rsquo;ve created.</li>
<li><a href="../../operators/heron-cli#restarting-a-topology">restart</a> an
active topology if, for example, you need update the topology configuration.</li>
<li><a href="../../operators/heron-cli#deactivating-a-topology">deactivate</a> the
topology. Once deactivated, the topology will stop processing but
remain running in the cluster.</li>
<li><a href="../../operators/heron-cli#killing-a-topology">kill</a> a topology to completely
remove it from the cluster.  It is no longer known to the Heron cluster and
can no longer be activated. Once killed, the only way to run that topology is
to re-submit it.</li>
</ol>

<h2 id="spouts:2990a96fddad7dca382b7d6e0cf93241">Spouts</h2>

<p>A Heron <strong>spout</strong> is a source of streams, responsible for emitting
<a href="../../developers/data-model">tuples</a> into the topology. A spout may, for
example, read data from a Kestrel queue or read tweets from the Twitter API and
emit tuples to one or more bolts.</p>

<p>Information on building spouts can be found in <a href="../../developers/java/spouts">Building
Spouts</a>.</p>

<h2 id="bolts:2990a96fddad7dca382b7d6e0cf93241">Bolts</h2>

<p>A Heron <strong>bolt</strong> consumes streams of
<a href="../../developers/data-model">tuples</a> emitted by spouts and performs some
set of user-defined processing operations on those tuples, which may include
performing complex stream transformations, performing storage operations,
aggregating multiple streams into one, emitting tuples to other bolts within the
topology, and much more.</p>

<p>Information on building bolts can be found in <a href="../../developers/java/bolts">Building
Bolts</a>.</p>

<h2 id="data-model:2990a96fddad7dca382b7d6e0cf93241">Data Model</h2>

<p>Heron has a fundamentally tuple-driven data model. You can find more information
in <a href="../../developers/data-model">Heron&rsquo;s Data Model</a>.</p>

<h2 id="logical-plan:2990a96fddad7dca382b7d6e0cf93241">Logical Plan</h2>

<p>A topology&rsquo;s <strong>logical plan</strong> is analagous to a database <a href="https://en.wikipedia.org/wiki/Query_plan">query
plan</a>. The image at the top of this
page is an example logical plan for a topology.</p>

<h2 id="physical-plan:2990a96fddad7dca382b7d6e0cf93241">Physical Plan</h2>

<p>A topology&rsquo;s <strong>physical plan</strong> is related to its logical plan but with the
crucial difference that a physical plan maps the actual execution logic of a
topology, including the machines running each spout or bolt and more. Here&rsquo;s a
rough visual representation of a physical plan:</p>

<p><img src="http://localhost:1313/heron/img/physicalplan.png" alt="Topology Physical Plan" /></p>
</article></section></div></div></div><script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body></html>