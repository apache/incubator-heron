## Heron UI Usage Guide

### Overview

This guide helps in understanding how to make best use of Heron UI for
monitoring and debugging your topologies.

The UI enables a user to get a lot of information about a topology or a part of
topology quickly, thus reducing the debugging time considerably. Some of these
features are listed below. Complete set of features can be found in next few
sections.

1. See logical plan of a topology
2. See physical plan of a topology
3. Configs of a topology
4. See some basic metrics for each of the instances and components
5. Links to get logs, memory histogram, jstack, heapdump and exceptions of
   a particular instance

and other useful links and information, that are explained below.

#### Topologies Page

This is the home page of Heron UI.

Following information or actions can be found on this page.

1. List of all topologies
2. Number of topologies fitered after search (total by default)
3. A topology's overview
4. Filter the topologies using `cluster`
5. Filter the topologies using string matching in names, clusters, environs,
   roles, versions, or submitters
6. Sort the topologies based on a particular column
7. Click on the topology name to find more info about the topology

![All topologies](/img/ui-guide/all-topologies.png)

#### Topology Page

This is the main page to monitor a topology. There are some basic metrics that
can be found here, and some generic info. A complete list of information and
actions is described below.

1. Name of the topology
2. [Logical plan](../../concepts/topologies#logical-plan) of the topology
3. [Physical plan](../../concepts/topologies#physical-plan) of the topology
4. Health metrics for the topology
5. General Info about the topology
6. General metrics for the topology
7. Click components for more details
8. Click instances for more details
9. Click on Aggregated Metrics to color instances by metrics
10. Link to topology level configs
11. Link to Job page  only if the scheduler provides a link
   `(TODO: Link to this guide)`
12. Link to Viz dashboard for this topology only if Tracker is configured with
   one. `(TODO: Link to this configuration)`

![Topology1] (/img/ui-guide/topology1.png)

![Topology2] (/img/ui-guide/topology2.png)

Each node in logical plan can be clicked for more specific info about that
component.

1. Averaged or Max metrics for all instances of this component
2. Aggregated metrics for all instances of this component
3. List of all instances and their aggregated metrics
4. Instance level operations, which are described in more details below

![Topology Component] (/img/ui-guide/topology-component.png)

Clicking on an instance will highlight that instance in the list.

1. Aggregated metrics are only for this instance
2. Quick access to Logs, Exceptions and Job pages for this instance
3. Component counters are still aggregated for all instances
4. The selected instance is highlighted

![Topology Instance] (/img/ui-guide/topology-instance.png)

#### Color by Metrics

Click on the circles for metrics to color components and instances by these
metrics. This is quick way to find out which instances are having issues.

![Topology Capacity] (/img/ui-guide/topology-capacity.png)

![Topology Failures] (/img/ui-guide/topology-failures.png)

#### Config Page

These are the Topology Configurations `(TODO: Add link to Topology
Configurations)` that your topology is configured with. Note that spout and bolt
level configurations are not part of topology config.

![Config] (/img/ui-guide/config.png)

#### Instance Action Pages

These actions are available for all the instances. They are described in more
detail below.

![Instance Links] (/img/ui-guide/topology-instance-links.png)

#### Logs Page

These are the logs generated by the selected instance. The whole logs file can
also be downloaded.

![Logs] (/img/ui-guide/logs.png)

#### Job Page

This is the directory view of the container. All instances from a container will
point to the same job page. Following informaion is available on this page,
among other things.

1. The jar or tar file associated with this topology
2. Logs for heron-executor `TODO: Link heron-executor`
3. `log-files` folder which has instance logs, as well as `stream manager` or
   `tmaster` logs.

![Jobpage] (/img/ui-guide/jobpage1.png)

![Jobpage logfiles] (/img/ui-guide/jobpage2-logfiles.png)

#### Exceptions Page

This page lists all exceptions logged by this instance. The exceptions are
deduplicated, and for each exception, the page shows the number of times this
exception occurred, the latest and the oldest occurance times.

![Exceptions] (/img/ui-guide/exceptions.png)

#### PID Page

This is a quick way to know the process ID for an instance. Since each instance
runs in its own JVM process, this will be unique for a host. The PID is
internally used for other tasks, such as getting jstack or heap dump for an
instance.

![PID] (/img/ui-guide/pid.png)

#### Jstack Page

This runs the `jstack` command on the host against the PID for the instance, and
prints the output on this page.

![Jstack] (/img/ui-guide/jstack.png)

#### Memory Histogram Page

This runs the `jmap -histo` command on the host against the PID for the
instance, and prints the output on this page.

![Histo] (/img/ui-guide/histo.png)

#### Memory Dump page

This runs the `jmap -dump:format=b,file=/tmp/heap.bin` command agaist the PID
for the instance, and prints the output on this page. Follow the instructions on
the page to download the heap dump file. This link does not download the file.

![Memory Dump] (/img/ui-guide/dump.png)
